#!/bin/bash

# Get list of running, user-visible apps (ignores daemons and menu bar processes)
apps=$(osascript -e 'tell application "System Events" to get name of (processes where background only is false)')

# Convert AppleScript list â†’ newline-separated
IFS=', ' read -r -a app_list <<< "$apps"

# Quit each app except Finder (quitting Finder is allowed but optional)
for app in "${app_list[@]}"; do
    if [[ "$app" != "Finder" ]]; then
        echo "Closing: $app"
        osascript -e "tell application \"$app\" to quit"
    fi
done
