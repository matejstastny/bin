#!/usr/bin/env python3

# prettifier for litematica exported material lists

import sys

STACK_SIZE = 64
SHULKER_STACKS = 27


def parse_material_list(path):
    items = []

    with open(path, "r", encoding="utf-8") as f:
        for line in f:
            line = line.rstrip()

            if not line.startswith("|"):
                continue
            if "Item" in line and "Total" in line:
                continue
            if set(line) <= {"|", "-", "+"}:
                continue

            parts = [p.strip() for p in line.split("|")[1:-1]]
            if len(parts) < 2:
                continue

            name = parts[0]
            try:
                total = int(parts[1])
            except ValueError:
                continue

            items.append((name, total))

    return items


def main():
    if len(sys.argv) != 2:
        print("Usage: litematica_to_shulkers.py <material_list.txt>")
        sys.exit(1)

    items = parse_material_list(sys.argv[1])

    print(f"{'Material':40} | {'Items':>8} | {'Stacks':>10} | {'Shulkers':>10}")
    print("-" * 80)

    for name, count in items:
        stacks = count / STACK_SIZE
        shulkers = stacks / SHULKER_STACKS

        print(f"{name:40} | " f"{count:8} | " f"{stacks:10.2f} | " f"{shulkers:10.2f}")


if __name__ == "__main__":
    main()
